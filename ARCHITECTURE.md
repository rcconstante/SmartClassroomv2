# System Architecture Diagram

## Smart Classroom with LSTM Prediction

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER INTERFACE                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                  Camera Monitor Page                         â”‚   â”‚
â”‚  â”‚                                                               â”‚   â”‚
â”‚  â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“   â”‚   â”‚
â”‚  â”‚  â”ƒ         ğŸ“¹ Full-Width Camera Feed (16:9)           â”ƒ   â”‚   â”‚
â”‚  â”‚  â”ƒ                                                      â”ƒ   â”‚   â”‚
â”‚  â”‚  â”ƒ   [Live Video Stream with Face Detection]          â”ƒ   â”‚   â”‚
â”‚  â”‚  â”ƒ                                                      â”ƒ   â”‚   â”‚
â”‚  â”‚  â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›   â”‚   â”‚
â”‚  â”‚                                                               â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚   â”‚
â”‚  â”‚  â”‚ ğŸ‘ Atten â”‚ ğŸ§  Engageâ”‚ ğŸ‘¥ Studentâ”‚ ğŸ“ˆ Trend â”‚            â”‚   â”‚
â”‚  â”‚  â”‚   82%    â”‚   78%    â”‚  28/32   â”‚ Stable   â”‚            â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚   â”‚
â”‚  â”‚                                                               â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚   â”‚
â”‚  â”‚  â”‚ ğŸ“Š Current States   â”‚ ğŸ”® LSTM Forecast    â”‚              â”‚   â”‚
â”‚  â”‚  â”‚  [Pie Chart]        â”‚  [Line Chart]       â”‚              â”‚   â”‚
â”‚  â”‚  â”‚                     â”‚  Past â†’ Future      â”‚              â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚   â”‚
â”‚  â”‚                                                               â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚   â”‚
â”‚  â”‚  â”‚        Detailed Engagement Analysis               â”‚      â”‚   â”‚
â”‚  â”‚  â”‚          [Large Doughnut Chart]                   â”‚      â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         BACKEND SYSTEM                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚                    Flask API Server                       â”‚       â”‚
â”‚  â”‚                                                            â”‚       â”‚
â”‚  â”‚  Endpoints:                                                â”‚       â”‚
â”‚  â”‚  â€¢ GET  /api/camera/stream  â†’ Video stream               â”‚       â”‚
â”‚  â”‚  â€¢ POST /api/camera/start   â†’ Start detection            â”‚       â”‚
â”‚  â”‚  â€¢ POST /api/camera/stop    â†’ Stop detection             â”‚       â”‚
â”‚  â”‚  â€¢ GET  /api/emotions       â†’ Current states             â”‚       â”‚
â”‚  â”‚  â€¢ GET  /api/lstm/predict   â†’ Predictions â­ NEW         â”‚       â”‚
â”‚  â”‚                                                            â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚           â†“                          â†“                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚ Camera System   â”‚      â”‚ LSTM Predictor â­ NEW â”‚               â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤               â”‚
â”‚  â”‚ â€¢ Face Detect   â”‚      â”‚ â€¢ History Buffer       â”‚               â”‚
â”‚  â”‚ â€¢ Emotion Model â”‚      â”‚ â€¢ Sequence Analysis    â”‚               â”‚
â”‚  â”‚ â€¢ State Trackingâ”‚      â”‚ â€¢ Trend Detection      â”‚               â”‚
â”‚  â”‚ â€¢ Engagement â†“  â”‚      â”‚ â€¢ Future Forecast      â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚           â”‚                            â”‚                            â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                        â†“                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          AI MODELS                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚         Student Engagement Model (Real-time)              â”‚       â”‚
â”‚  â”‚                                                            â”‚       â”‚
â”‚  â”‚  Input: 48x48 grayscale face image                        â”‚       â”‚
â”‚  â”‚         â†“                                                  â”‚       â”‚
â”‚  â”‚  CNN Layers (Emotion Detection)                           â”‚       â”‚
â”‚  â”‚         â†“                                                  â”‚       â”‚
â”‚  â”‚  Output: 6 states                                          â”‚       â”‚
â”‚  â”‚    â€¢ Engaged (70%)                                         â”‚       â”‚
â”‚  â”‚    â€¢ Confused (15%)                                        â”‚       â”‚
â”‚  â”‚    â€¢ Frustrated (5%)                                       â”‚       â”‚
â”‚  â”‚    â€¢ Drowsy (3%)                                           â”‚       â”‚
â”‚  â”‚    â€¢ Bored (5%)                                            â”‚       â”‚
â”‚  â”‚    â€¢ Looking Away (2%)                                     â”‚       â”‚
â”‚  â”‚                                                            â”‚       â”‚
â”‚  â”‚  File: static/model/Student_Engagement_Model.h5           â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚         LSTM Temporal Predictor â­ NEW                    â”‚       â”‚
â”‚  â”‚                                                            â”‚       â”‚
â”‚  â”‚  Input: Sequence (30 timesteps Ã— 10 features)             â”‚       â”‚
â”‚  â”‚         [attention, engagement, state counts, ...]        â”‚       â”‚
â”‚  â”‚         â†“                                                  â”‚       â”‚
â”‚  â”‚  LSTM Layer 1 (128 units)                                 â”‚       â”‚
â”‚  â”‚         â†“                                                  â”‚       â”‚
â”‚  â”‚  LSTM Layer 2 (64 units)                                  â”‚       â”‚
â”‚  â”‚         â†“                                                  â”‚       â”‚
â”‚  â”‚  Dense Layers                                              â”‚       â”‚
â”‚  â”‚         â†“                                                  â”‚       â”‚
â”‚  â”‚  Output: Future predictions (10 timesteps Ã— 2 values)     â”‚       â”‚
â”‚  â”‚    â€¢ Predicted Attention [82%, 81%, 80%, ...]            â”‚       â”‚
â”‚  â”‚    â€¢ Predicted Engagement [78%, 77%, 76%, ...]           â”‚       â”‚
â”‚  â”‚    â€¢ Trend: "Declining"                                    â”‚       â”‚
â”‚  â”‚    â€¢ Confidence: 0.85                                      â”‚       â”‚
â”‚  â”‚                                                            â”‚       â”‚
â”‚  â”‚  File: static/model/lstm_classroom_model.h5               â”‚       â”‚
â”‚  â”‚  Mode: Trained or Simulation                              â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       DATA FLOW (Real-time)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  Every 2 seconds:                                                    â”‚
â”‚                                                                       â”‚
â”‚  1. ğŸ“¹ Camera captures frame                                        â”‚
â”‚     â””â†’ Detect faces with Haar Cascade                               â”‚
â”‚                                                                       â”‚
â”‚  2. ğŸ§  For each face:                                               â”‚
â”‚     â””â†’ Extract 48x48 region                                         â”‚
â”‚     â””â†’ Run through Engagement Model                                 â”‚
â”‚     â””â†’ Get state (Engaged/Confused/etc.)                           â”‚
â”‚                                                                       â”‚
â”‚  3. ğŸ“Š Aggregate results:                                           â”‚
â”‚     â””â†’ Count each state                                             â”‚
â”‚     â””â†’ Calculate percentages                                        â”‚
â”‚     â””â†’ Compute engagement score                                     â”‚
â”‚                                                                       â”‚
â”‚  4. ğŸ’¾ Store observation:                                           â”‚
â”‚     â””â†’ Add to LSTM history buffer (last 30)                        â”‚
â”‚     â””â†’ Update current stats                                         â”‚
â”‚                                                                       â”‚
â”‚  5. ğŸ”® LSTM prediction:                                             â”‚
â”‚     â””â†’ Preprocess history sequence                                  â”‚
â”‚     â””â†’ Run through LSTM model                                       â”‚
â”‚     â””â†’ Generate 10-step forecast                                    â”‚
â”‚     â””â†’ Detect trend direction                                       â”‚
â”‚     â””â†’ Calculate confidence                                         â”‚
â”‚                                                                       â”‚
â”‚  6. ğŸ“¡ Send to frontend:                                            â”‚
â”‚     â””â†’ Current states â†’ Pie chart                                   â”‚
â”‚     â””â†’ Predictions â†’ Line chart                                     â”‚
â”‚     â””â†’ Trend â†’ Badge indicator                                      â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     TRAINING PIPELINE (Offline)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  Phase 1: Data Collection                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚ Multiple Class Sessions (20-50 sessions)         â”‚               â”‚
â”‚  â”‚                                                   â”‚               â”‚
â”‚  â”‚ â€¢ Session 1: Monday 8AM - 90 minutes            â”‚               â”‚
â”‚  â”‚ â€¢ Session 2: Tuesday 2PM - 90 minutes           â”‚               â”‚
â”‚  â”‚ â€¢ Session 3: Wednesday 10AM - 90 minutes        â”‚               â”‚
â”‚  â”‚ â€¢ ... (more sessions for diversity)              â”‚               â”‚
â”‚  â”‚                                                   â”‚               â”‚
â”‚  â”‚ Each session recorded every 2 minutes:           â”‚               â”‚
â”‚  â”‚   timestamp, attention, engagement, states...    â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                        â†“                                              â”‚
â”‚  Phase 2: Data Preparation                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚ prepare_data.py                                   â”‚               â”‚
â”‚  â”‚                                                   â”‚               â”‚
â”‚  â”‚ 1. Load CSV files                                â”‚               â”‚
â”‚  â”‚ 2. Normalize features (0-1 range)                â”‚               â”‚
â”‚  â”‚ 3. Create sequences (30 timesteps)               â”‚               â”‚
â”‚  â”‚ 4. Split train/val/test (70/15/15)              â”‚               â”‚
â”‚  â”‚ 5. Save .npy files                               â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                        â†“                                              â”‚
â”‚  Phase 3: Model Training                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚ train_lstm.py                                     â”‚               â”‚
â”‚  â”‚                                                   â”‚               â”‚
â”‚  â”‚ 1. Load preprocessed data                        â”‚               â”‚
â”‚  â”‚ 2. Build LSTM architecture                       â”‚               â”‚
â”‚  â”‚ 3. Train for 100 epochs                          â”‚               â”‚
â”‚  â”‚ 4. Monitor validation loss                       â”‚               â”‚
â”‚  â”‚ 5. Save best model                               â”‚               â”‚
â”‚  â”‚ 6. Generate plots                                â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                        â†“                                              â”‚
â”‚  Phase 4: Deployment                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚ lstm_classroom_model.h5 â†’ static/model/          â”‚               â”‚
â”‚  â”‚                                                   â”‚               â”‚
â”‚  â”‚ â€¢ Restart Flask server                           â”‚               â”‚
â”‚  â”‚ â€¢ Model loaded automatically                     â”‚               â”‚
â”‚  â”‚ â€¢ Predictions now use trained weights            â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## File Structure

```
SmartClassroom/
â”œâ”€â”€ app.py                          # Flask server + LSTM integration
â”œâ”€â”€ requirements.txt                # Python dependencies
â”œâ”€â”€ README.md                       # Main documentation
â”œâ”€â”€ LSTM_TRAINING_GUIDE.md          # Detailed training guide
â”œâ”€â”€ QUICK_START.md                  # Quick reference
â”œâ”€â”€ IMPLEMENTATION_SUMMARY.md       # Technical details
â”‚
â”œâ”€â”€ templates/
â”‚   â”œâ”€â”€ index.html                  # Main app (Camera nav added)
â”‚   â”œâ”€â”€ js/
â”‚   â”‚   â”œâ”€â”€ app.js                  # loadCamera() redesigned â­
â”‚   â”‚   â””â”€â”€ dashboard.js            # LSTM chart functions â­
â”‚   â””â”€â”€ css/
â”‚       â””â”€â”€ style.css
â”‚
â”œâ”€â”€ camera_system/
â”‚   â”œâ”€â”€ emotion_detector.py         # Engagement state detection
â”‚   â”œâ”€â”€ ml_models.py                # LSTMPredictor class â­
â”‚   â””â”€â”€ camera_detector.py          # Face detection
â”‚
â”œâ”€â”€ static/
â”‚   â””â”€â”€ model/
â”‚       â”œâ”€â”€ Student_Engagement_Model.h5      # Real-time classification
â”‚       â”œâ”€â”€ lstm_classroom_model.h5          # Temporal prediction â­
â”‚       â””â”€â”€ lstm_scaler.pkl                  # Feature normalization â­
â”‚
â”œâ”€â”€ training_scripts/                        # â­ NEW
â”‚   â”œâ”€â”€ generate_sample_data.py              # Create synthetic data
â”‚   â”œâ”€â”€ prepare_data.py                      # Preprocess for training
â”‚   â””â”€â”€ train_lstm.py                        # Train LSTM model
â”‚
â””â”€â”€ data/                                    # â­ NEW
    â”œâ”€â”€ README.md                            # Data format guide
    â”œâ”€â”€ training/                            # Training sessions (70%)
    â”œâ”€â”€ validation/                          # Validation sessions (15%)
    â”œâ”€â”€ test/                                # Test sessions (15%)
    â”œâ”€â”€ X_train.npy                          # Processed sequences
    â”œâ”€â”€ y_train.npy                          # Training labels
    â”œâ”€â”€ X_val.npy                            # Validation sequences
    â””â”€â”€ y_val.npy                            # Validation labels
```

## Key Algorithms

### Engagement Score Calculation

```
States Weight:
  Engaged:       1.0  (highest)
  Confused:      0.4
  Looking Away:  0.3
  Frustrated:    0.3
  Bored:         0.2
  Drowsy:        0.1  (lowest)

Engagement = Î£(state_count Ã— weight) / total_students Ã— 100
```

### LSTM Prediction Algorithm

```
1. Collect history (last 30 observations):
   - [t-30, t-29, ..., t-1, t]
   - Each observation: [attention, engagement, 6 states, count, env]

2. Normalize features (0-1 range)

3. Feed into LSTM:
   Input: (1, 30, 10)  # batch, sequence, features
   Output: (1, 10, 2)  # batch, predictions, [attention, engagement]

4. Post-process:
   - Denormalize predictions (0-100 range)
   - Calculate trend (compare avg to current)
   - Compute confidence (based on consistency)
   - Map to engagement states

5. Return:
   {
     attention_scores: [82, 81, 80, ...],
     engagement_scores: [78, 77, 76, ...],
     trend: "declining",
     confidence: 0.85
   }
```

## Technology Stack Summary

| Component | Technology | Purpose |
|-----------|------------|---------|
| **Frontend** | JavaScript ES6+ | Interactive UI |
| **Charts** | Chart.js | Data visualization |
| **Backend** | Flask (Python) | API server |
| **Real-time Model** | TensorFlow/Keras | Engagement classification |
| **Prediction Model** | LSTM (TensorFlow) | Temporal forecasting |
| **Computer Vision** | OpenCV | Face detection |
| **Data Processing** | NumPy, Pandas | Numerical operations |
| **Training** | TensorFlow 2.x | Model training |

## Performance Metrics

| Metric | Value | Notes |
|--------|-------|-------|
| **Real-time Latency** | <50ms | Per face detection |
| **LSTM Inference** | 50-100ms | Per prediction |
| **Model Size** | 10MB | LSTM model |
| **Memory Usage** | ~100MB | Runtime |
| **Update Frequency** | 2 seconds | Real-time updates |
| **Prediction Horizon** | 20 minutes | 10 timesteps Ã— 2min |
| **History Window** | 60 minutes | 30 timesteps Ã— 2min |

---

**Legend:**
- â­ NEW - Features added in this implementation
- ğŸ“¹ - Camera/Video related
- ğŸ”® - LSTM/Prediction related
- ğŸ“Š - Data/Analytics related
- ğŸ§  - AI/ML model related
